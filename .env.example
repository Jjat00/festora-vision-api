# ============================================================
# festora-vision-api — environment variable reference
# Copy this file to .env and fill in your values.
# The service works with all defaults — only API_KEY is
# recommended to set in production.
# ============================================================

# ---- Authentication ----------------------------------------
# Leave blank to run in open/unauthenticated mode (local dev).
# Set to any secret string to require X-Api-Key: <value> on all requests.
API_KEY=

# ---- Service identity -------------------------------------
ENVIRONMENT=development        # development | staging | production
APP_VERSION=1.0.0

# ---- Logging ----------------------------------------------
LOG_LEVEL=INFO                 # DEBUG | INFO | WARNING | ERROR
LOG_JSON=true                  # true = JSON lines (prod); false = human-readable

# ---- Rate limiting ----------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60       # requests per client IP per minute
RATE_LIMIT_BURST=10

# ---- Model configuration ----------------------------------
MODELS_DIR=/app/models_cache
CLIP_MODEL_NAME=openai/clip-vit-base-patch32
PYIQA_BRISQUE_MODEL=brisque
PYIQA_NIMA_MODEL=nima
DEEPFACE_DETECTOR=opencv       # opencv | ssd | mtcnn | retinaface

# ---- Image fetch limits -----------------------------------
MAX_IMAGE_FETCH_TIMEOUT_SECONDS=15
MAX_IMAGE_SIZE_BYTES=31457280  # 30 MB

# ---- Batch / clustering -----------------------------------
MAX_BATCH_SIZE=20
DBSCAN_EPS_DEFAULT=0.35
DBSCAN_MIN_SAMPLES_DEFAULT=2

# ---- LLM visual analysis (POST /v1/analyze/llm) -----------
# Configure only the provider(s) you intend to use.
# Docs: https://docs.litellm.ai/docs/providers
LLM_DEFAULT_MODEL=anthropic/claude-opus-4-6
LLM_MAX_TOKENS=500

# Anthropic (Claude) — https://console.anthropic.com
ANTHROPIC_API_KEY=

# OpenAI (GPT-4o, etc.) — https://platform.openai.com
OPENAI_API_KEY=

# Google Gemini — https://aistudio.google.com
GEMINI_API_KEY=

# ---- Uvicorn (read by the CMD in Dockerfile) --------------
UVICORN_WORKERS=2
